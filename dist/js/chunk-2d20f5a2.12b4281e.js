(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20f5a2"],{b2ea:function(a,t,e){"use strict";e.r(t);var i=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-container",{attrs:{"grid-list-lg":""}},[e("v-layout",{attrs:{"justify-center":""}},[e("v-flex",{attrs:{"pa-2":""}},[e("div",{staticClass:"pt-4"},[e("v-card",[e("v-card-title",[e("p",{staticClass:"teal--text font-weight-bold title"},[a._v("Lista de invitados registrados")]),e("v-spacer"),e("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar",color:"teal","single-line":"","hide-details":""},model:{value:a.search,callback:function(t){a.search=t},expression:"search"}})],1),e("v-data-table",{staticClass:"elevation-1",attrs:{headers:a.headers,items:a.visitantesCollection,search:a.search,locale:"es-ES"},scopedSlots:a._u([{key:"item.horaIngreso",fn:function(t){var i=t.item;return[i.horaIngreso?e("p",[a._v(a._s(i.horaIngreso))]):a._e(),i.horaIngreso?a._e():e("v-btn",{staticClass:"text-capitalize white--text",attrs:{color:"orange",depressed:"",small:""},on:{click:function(t){a.editVisita(i),a.dialogIngreso=!0}}},[a._v("Ingreso")])]}},{key:"item.horaSalida",fn:function(t){var i=t.item;return[i.horaSalida?e("p",[a._v(a._s(i.horaSalida))]):a._e(),i.horaSalida?a._e():e("v-btn",{staticClass:"text-capitalize white--text ml-2",attrs:{color:"green",depressed:"",small:""},on:{click:function(t){a.editVisita(i),a.dialog=!0}}},[a._v("Salida")])]}}])}),e("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:a.dialogIngreso,callback:function(t){a.dialogIngreso=t},expression:"dialogIngreso"}},[e("v-card",[e("v-card-title",{staticClass:"headline"},[a._v("Registro del invitado")]),e("v-card-text",[a._v("Se registro satisfactoriamente el ingreso del invitado")]),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){a.dialogIngreso=!1}}},[a._v("Cancelar")]),e("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){a.updateHoraIngresoVisita(),a.dialogIngreso=!1}}},[a._v("Aceptar")])],1)],1)],1),e("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:a.dialog,callback:function(t){a.dialog=t},expression:"dialog"}},[e("v-card",[e("v-card-title",{staticClass:"headline"},[a._v("Registro del invitado")]),e("v-card-text",[a._v("Se registro satisfactoriamente la salida del invitado")]),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){a.dialog=!1}}},[a._v("Cancelar")]),e("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){a.updateHoraSalidaVisita(),a.dialog=!1}}},[a._v("Aceptar")])],1)],1)],1)],1)],1)])],1)],1)},o=[],n=(e("4160"),e("159b"),e("c975"),e("0d03"),e("c1df")),s=e.n(n),r={created:function(){this.$store.commit("SET_LAYOUT","principal-layout"),this.getVisitas()},data:function(){return{valid:!0,clearable:!0,errMessage:"",dialog:!1,dialogIngreso:!1,visitantesCollection:[],search:"",headers:[{text:"Tipo documento",value:"tipoDocumento"},{text:"Documento",value:"numDoc"},{text:"Nombre",value:"nombres"},{text:"Apellidos",value:"apellidos"},{text:"Fecha",value:"fecha"},{text:"Hora programada",value:"hora"},{text:"Ubicaci√≥n",value:"ubicacion"},{text:"Hora de ingreso",value:"horaIngreso"},{text:"Hora de salida",value:"horaSalida"}],ref:this.$firebase.firestore().collection("visitantes"),idReg:"",editedIndex:-1}},mounted:function(){this.getVisitas()},methods:{getVisitas:function(){var a=this;this.ref.where("estado","==","pendiente").get().then((function(t){var e=[];t.forEach((function(a){a.data().horaIngreso?a.data().horaSalida?e.push({id:a.id,tipoDocumento:a.data().tipoDocumento,numDoc:a.data().numDoc,nombres:a.data().nombres,apellidos:a.data().apellidos,fecha:a.data().fecha,hora:a.data().hora,ubicacion:a.data().ubicacion,horaIngreso:s.a.unix(a.data().horaIngreso.seconds).format("DD/MM/YYYY, h:mm a"),horaSalida:s.a.unix(a.data().horaSalida.seconds).format("DD/MM/YYYY, h:mm a")}):e.push({id:a.id,tipoDocumento:a.data().tipoDocumento,numDoc:a.data().numDoc,nombres:a.data().nombres,apellidos:a.data().apellidos,fecha:a.data().fecha,hora:a.data().hora,ubicacion:a.data().ubicacion,horaIngreso:s.a.unix(a.data().horaIngreso.seconds).format("DD/MM/YYYY, h:mm a")}):e.push({id:a.id,tipoDocumento:a.data().tipoDocumento,numDoc:a.data().numDoc,nombres:a.data().nombres,apellidos:a.data().apellidos,fecha:a.data().fecha,hora:a.data().hora,ubicacion:a.data().ubicacion})})),a.visitantesCollection=e,console.log(a.visitantesCollection)}))["catch"]((function(a){console.log("Error getting documents: ",a)}))},editVisita:function(a){this.editedIndex=this.visitantesCollection.indexOf(a),this.idReg=a.id},updateHoraIngresoVisita:function(){console.log("en update hora ingreso"),console.log(this.idReg),this.ref.doc(this.idReg).update({horaIngreso:new Date}),this.getVisitas()},updateHoraSalidaVisita:function(){console.log(this.idReg),this.ref.doc(this.idReg).update({horaSalida:new Date}),this.getVisitas()}}},d=r,c=e("2877"),l=e("6544"),u=e.n(l),h=e("8336"),g=e("b0af"),v=e("99d9"),p=e("a523"),f=e("8fea"),m=e("169a"),b=e("0e8f"),x=e("a722"),D=e("2fa4"),V=e("8654"),I=Object(c["a"])(d,i,o,!1,null,null,null);t["default"]=I.exports;u()(I,{VBtn:h["a"],VCard:g["a"],VCardActions:v["a"],VCardText:v["b"],VCardTitle:v["c"],VContainer:p["a"],VDataTable:f["a"],VDialog:m["a"],VFlex:b["a"],VLayout:x["a"],VSpacer:D["a"],VTextField:V["a"]})}}]);
//# sourceMappingURL=chunk-2d20f5a2.12b4281e.js.map